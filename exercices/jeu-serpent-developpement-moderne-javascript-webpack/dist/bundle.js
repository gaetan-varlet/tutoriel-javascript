!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(t,...e){this.body=e,this.direction=t,this.ateApple=!1}advance(){const t=this.body[0].slice();if("left"===this.direction)t[0]-=1;else if("right"===this.direction)t[0]+=1;else if("down"===this.direction)t[1]+=1;else{if("up"!==this.direction)throw"Invalid Direction";t[1]-=1}this.body.unshift(t),this.ateApple?this.ateApple=!1:this.body.pop()}setDirection(t){let e;if("left"===this.direction||"right"===this.direction)e=["up","down"];else{if("up"!==this.direction&&"down"!==this.direction)throw"Invalid Direction";e=["left","right"]}e.includes(t)&&(this.direction=t)}checkCollision(t,e){let i=!1,s=!1;const[n,...o]=this.body,[r,a]=n;(r<0||r>t-1||(a<0||a>e-1))&&(i=!0);for(let t of o)r===t[0]&&a===t[1]&&(s=!0);return i||s}isEatingApple(t){const e=this.body[0];return e[0]===t.position[0]&&e[1]===t.position[1]}}class n{constructor(t=[10,10]){this.position=t}setNewPosition(t,e){const i=Math.round(Math.random()*(t-1)),s=Math.round(Math.random()*(e-1));this.position=[i,s]}isOnSnake(t){let e=!1;for(let i of t.body)this.position[0]===i[0]&&this.position[1]===i[1]&&(e=!0);return e}}class o{static gameOver(t,e,i){t.save(),t.font="bold 70px sans-serif",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.strokeStyle="white",t.lineWidth=5,t.strokeText("Game Over",e,i-180),t.fillText("Game Over",e,i-180),t.font="bold 30px sans-serif",t.strokeText("Appuyer sur la touche espace pour rejouer",e,i-120),t.fillText("Appuyer sur la touche espace pour rejouer",e,i-120),t.restore()}static drawScore(t,e,i,s){t.save(),t.font="bold 200px sans-serif",t.fillStyle="grey",t.textAlign="center",t.textBaseline="middle",t.fillText(s.toString(),e,i),t.restore()}static drawSnake(t,e,i){t.save(),t.fillStyle="#ff0000";for(let s of i.body)this.drawBlock(t,s,e);t.restore()}static drawApple(t,e,i){const s=e/2,n=i.position[0]*e+s,o=i.position[1]*e+s;t.save(),t.fillStyle="#33cc33",t.beginPath(),t.arc(n,o,s,0,2*Math.PI,!0),t.fill(),t.restore()}static drawBlock(t,e,i){const[s,n]=e;t.fillRect(s*i,n*i,i,i)}}window.onload=(()=>{let t=new class{constructor(t=900,e=600){this.canvasWidth=t,this.canvasHeight=e,this.blockSize=30,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.delay=100,this.widthInBlocks=this.canvasWidth/this.blockSize,this.heightInBlocks=this.canvasHeight/this.blockSize,this.centreX=this.canvasWidth/2,this.centreY=this.canvasHeight/2,this.snakee,this.applee,this.score,this.timeout}init(){this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.border="30px solid grey",this.canvas.style.margin="30px auto 10px auto",this.canvas.style.display="block",this.canvas.style.backgroundColor="#ddd",document.body.appendChild(this.canvas),this.launch()}launch(){this.snakee=new s("right",[6,4],[5,4],[4,4]),this.applee=new n,this.score=0,clearTimeout(this.timeout),this.refreshCanvas()}refreshCanvas(){if(this.snakee.advance(),this.snakee.checkCollision(this.widthInBlocks,this.heightInBlocks))o.gameOver(this.ctx,this.centreX,this.centreY);else{if(this.snakee.isEatingApple(this.applee)){this.score++,this.snakee.ateApple=!0;do{this.applee.setNewPosition(this.widthInBlocks,this.heightInBlocks)}while(this.applee.isOnSnake(this.snakee))}this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),o.drawScore(this.ctx,this.centreX,this.centreY,this.score),o.drawSnake(this.ctx,this.blockSize,this.snakee),o.drawApple(this.ctx,this.blockSize,this.applee),this.timeout=setTimeout(this.refreshCanvas.bind(this),this.delay)}}};t.init(),document.onkeydown=(e=>{let i;const s=e.keyCode;if(37===s)i="left";else if(38===s)i="up";else if(39===s)i="right";else{if(40!==s)return 32===s?void t.launch():void 0;i="down"}t.snakee.setDirection(i)})})}]);